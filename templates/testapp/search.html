{% extends 'base.html' %}
{% load staticfiles %}
{% load custom_tags %}

{% block header %}
{#<link type="text/css" rel="stylesheet" href="{% static 'css/search.css' %}" />#}
    <script type="text/javascript" src="{% static 'js/search.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/d3.min.js' %}"></script>

{% endblock %}

{% block content %}


    <h2>Search Metadata Page</h2>

        <div class="search-right-column" data-spy="affix" data-offset-top="125" data-offset-bottom="10">
            Search Criteria:
            <div id="search-criteria"></div>
        <form id="search-filters" method="post" action="{% url 'search_results' %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary space-top-10">Search</button>
        </form>
    </div>


    <div class="search-left-column">

        <div class="panel panel-default">
            <div class="panel-heading">
                <h5>
                    <a data-toggle="collapse" data-parent="#search-accordion" href="#collapseOne">
                        Clinical Data Search
                    </a>
                </h5>
            </div>
            <div id="collapseOne" class="panel-collapse collapse in">
                <div class="panel-body">

                    {% for attr in clin_attr %}
                    <h5>{{ attr.attribute }}</h5>
                    <ul class="search-checkbox-list">
                        {% for v in attr_list|get_item:attr.attribute %}
                            <li>
                                <label for="{{ attr.attribute }}-{{ v.value }}">
                                    <input type="checkbox" name="elements-selected" id="{{ attr.attribute }}-{{ v.value }}" >
                                    {{ v.count }} - {{ v.value }}
                                </label>
                            </li>
                        {% endfor %}
                    </ul>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h5>
                    <a data-toggle="collapse" data-parent="#search-accordion" href="#collapseTwo">
                        Sample Data Search
                    </a>
                </h5>
            </div>
            <div id="collapseTwo" class="panel-collapse collapse">
                <div class="panel-body">

                    {% for attr in samp_attr %}
                    <h5>{{ attr.attribute }}</h5>
                    <ul class="search-checkbox-list">
                        {% for v in attr_list|get_item:attr.attribute %}
                            <li>
                                <label for="{{ attr.attribute }}-{{ v.value }}">
                                    <input type="checkbox" name="elements-selected" id="{{ attr.attribute }}-{{ v.value }}" >
                                    {{ v.count }} - {{ v.value }}
                                </label>
                            </li>
                        {% endfor %}
                    </ul>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h5>
                    <a data-toggle="collapse" data-parent="#search-accordion" href="#collapseThree">
                        Gene Data Search
                    </a>
                </h5>
            </div>
            <div id="collapseThree" class="panel-collapse collapse">
                <div class="panel-body">

                    {% for attr in gnab_attr %}
                    <h5>{{ attr.attribute }}</h5>
                    <ul class="search-checkbox-list">
                        {% for v in attr_list|get_item:attr.attribute %}
                            <li>
                                <label for="{{ attr.attribute }}-{{ v.value }}">
                                    <input type="checkbox" name="elements-selected" id="{{ attr.attribute }}-{{ v.value }}" >
                                    {{ v.count }} - {{ v.value }}
                                </label>
                            </li>
                        {% endfor %}
                    </ul>
                    {% endfor %}
                </div>
            </div>
        </div>

    </div>

    <h4>This is a sample treemap of data. TODO: Get tooltips working</h4>
    <div id="graph-tip"></div>
    <div id="treegraph" class="space-bottom-10"></div>

    <script type="text/javascript" src="{% static 'js/tree-graph.js' %}"></script>

{% endblock %}
